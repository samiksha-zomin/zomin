{"ast":null,"code":"var _jsxFileName = \"/Users/samikshazomin/Desktop/zomin/frontend/src/Components/Home/Comment.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, Fragment, useContext } from \"react\";\nimport Axios from \"axios\";\nimport { Container, Col, Form, Row } from \"react-bootstrap\";\nimport Profile from \"../Profile\";\nimport useInput from \"../../Helpers/use-input\";\nimport { AuthContext } from \"../../Helpers/AuthContext\";\nimport { BsClockFill } from \"react-icons/bs\";\nimport { BiMessageCheck, BiMinusCircle } from \"react-icons/bi\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst isNotEmpty = value => value.trim() !== \"\";\n\nfunction Comment(props) {\n  _s();\n\n  const {\n    authState,\n    setAuthState\n  } = useContext(AuthContext);\n  const userID = props.userID;\n  const postID = props.postID;\n  const [viewProfile, setViewProfile] = useState(\"avatar/male.svg\");\n  const [viewComment, setViewComment] = useState([]);\n  useEffect(() => {\n    Axios.get(`${process.env.REACT_APP_SERVER_DOMAIN}/home/userProfile/` + userID, {\n      headers: {\n        accessToken: localStorage.getItem(\"accessToken\")\n      }\n    }).then(response => {\n      const profileDetail1 = response.data[0];\n      const profileDetail2 = response.data[1];\n      var profile;\n\n      if (profileDetail1.length === 0) {\n        if (authState.company === 1) {\n          profile = `${process.env.REACT_APP_SERVER_DOMAIN}/public/Assests/Images/avatar/bp.png`;\n          setViewProfile(profile);\n        } else {\n          if (profileDetail2[0].gender === \"Male\") {\n            profile = `${process.env.REACT_APP_SERVER_DOMAIN}/public/Assests/Images/avatar/male.svg`;\n            setViewProfile(profile);\n          } else {\n            profile = `${process.env.REACT_APP_SERVER_DOMAIN}/public/Assests/Images/avatar/female.svg`;\n            setViewProfile(profile);\n          }\n        }\n      } else {\n        profile = `${process.env.REACT_APP_SERVER_DOMAIN}/public/Assests/Images/user/` + profileDetail1[0].profile_photo;\n        setViewProfile(profile);\n      }\n    });\n  });\n  useEffect(() => {\n    Axios.get(`${process.env.REACT_APP_SERVER_DOMAIN}/home/commentlist/` + postID).then(response => {\n      setViewComment(response.data);\n    });\n  }, [postID]); //COMMENT Input Check\n\n  const {\n    value: enteredComment,\n    isValid: enteredCommentIsValid,\n    hasError: commentInputHasError,\n    valueChangeHandler: commentChangeHandler,\n    inputBlurHandler: commentBlurHandler,\n    reset: resetCommentInput\n  } = useInput(isNotEmpty);\n  let commentFormIsValid = false;\n\n  if (enteredComment !== \"\") {\n    commentFormIsValid = true;\n  }\n\n  const commentFormSubmissionHandler = event => {\n    event.preventDefault();\n\n    if (!enteredCommentIsValid) {\n      return;\n    } else {\n      Axios.post(`${process.env.REACT_APP_SERVER_DOMAIN}/home/comment/`, {\n        userID: userID,\n        postID: postID,\n        enteredComment: enteredComment\n      }).then(response => {\n        const newCommentData = response.data[1];\n\n        if (response.data[0].error) {\n          return toast.error( /*#__PURE__*/_jsxDEV(Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(BiMinusCircle, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: response.data[0].error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this));\n        } else {\n          return [toast.success( /*#__PURE__*/_jsxDEV(Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(BiMessageCheck, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 17\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: response.data[0].success\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 36\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this)), setViewComment([{\n            comment: newCommentData[0].comment,\n            comment_user_id: newCommentData[0].comment_user_id,\n            company: newCommentData[0].company,\n            name: newCommentData[0].name,\n            companyname: newCommentData[0].companyname,\n            comment_time: newCommentData[0].comment_time\n          }, ...viewComment])];\n        }\n      });\n    }\n\n    resetCommentInput();\n  };\n\n  const commentClasses = commentInputHasError ? \"form-control form-control-sm is-invalid\" : \"form-control form-control-sm\";\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      authState,\n      setAuthState\n    },\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: commentFormSubmissionHandler,\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          className: \"align-items-center py-3\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: 1,\n            sm: 1,\n            className: \"p-0 ps-2 ps-xs-1\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: viewProfile,\n              alt: \"Zom-In User\",\n              className: \" col my-auto rounded-circle\",\n              width: \"30\",\n              height: \"30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 8,\n            sm: 9,\n            className: \"pe-xs-0\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"comment\",\n                placeholder: \"Comments\",\n                autoComplete: \"off\",\n                className: commentClasses,\n                onChange: commentChangeHandler,\n                onBlur: commentBlurHandler,\n                value: enteredComment\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 17\n              }, this), commentInputHasError && /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n                type: \"invalid\",\n                children: \"Please share your thought on this post.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 2,\n            sm: 2,\n            className: \"p-0\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-sm btn-primary\",\n              type: \"submit\",\n              disabled: !commentFormIsValid,\n              children: \"Comment\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), viewComment.map((commentDetails, key) => {\n        const comment = commentDetails.comment;\n        const commentOwnerID = commentDetails.comment_user_id;\n        const companyRole = commentDetails.company;\n        const commentUserName = commentDetails.name;\n        const commentCompanyName = commentDetails.companyname;\n        const comment_time = new Date(commentDetails.comment_time);\n\n        if (companyRole === 1) {\n          var postCompanyLink = \"/partner/\" + commentCompanyName.toLowerCase().trim().split(/\\s+/).join(\"-\");\n        }\n\n        const commentTime = comment_time.toLocaleDateString(\"en-GB\", {\n          day: \"numeric\",\n          month: \"short\",\n          year: \"numeric\",\n          hour: \"2-digit\",\n          minute: \"2-digit\",\n          hour12: true\n        }).replace(/ /g, \" \");\n        return /*#__PURE__*/_jsxDEV(Row, {\n          className: \"py-1\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: 1,\n            sm: 1,\n            className: \"p-0 ps-2\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: /*#__PURE__*/_jsxDEV(Profile, {\n                userID: commentOwnerID\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 12\n              }, this),\n              alt: \"Zom-IN User\",\n              width: \"32\",\n              height: \"32\",\n              className: \"rounded-circle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 11,\n            sm: 11,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-2 border rounded bg-light bg-gradient\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"fw-bold mb-0\",\n                children: companyRole === 1 ? /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: postCompanyLink,\n                  target: \"_blank\",\n                  rel: \"noreferrer\",\n                  className: \"text-decoration-none text-dark\",\n                  children: commentCompanyName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"/home\",\n                  className: \"text-decoration-none text-dark\",\n                  children: [\" \", commentUserName]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mb-0\",\n                children: comment\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted fw-light fs-7\",\n              children: [/*#__PURE__*/_jsxDEV(BsClockFill, {\n                size: 12,\n                className: \"me-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 19\n              }, this), commentTime]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Comment, \"14M/4XmSeglO+LSuLJ0kUnymMYM=\", false, function () {\n  return [useInput];\n});\n\n_c = Comment;\nexport default Comment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"sources":["/Users/samikshazomin/Desktop/zomin/frontend/src/Components/Home/Comment.js"],"names":["React","useState","useEffect","Fragment","useContext","Axios","Container","Col","Form","Row","Profile","useInput","AuthContext","BsClockFill","BiMessageCheck","BiMinusCircle","toast","isNotEmpty","value","trim","Comment","props","authState","setAuthState","userID","postID","viewProfile","setViewProfile","viewComment","setViewComment","get","process","env","REACT_APP_SERVER_DOMAIN","headers","accessToken","localStorage","getItem","then","response","profileDetail1","data","profileDetail2","profile","length","company","gender","profile_photo","enteredComment","isValid","enteredCommentIsValid","hasError","commentInputHasError","valueChangeHandler","commentChangeHandler","inputBlurHandler","commentBlurHandler","reset","resetCommentInput","commentFormIsValid","commentFormSubmissionHandler","event","preventDefault","post","newCommentData","error","success","comment","comment_user_id","name","companyname","comment_time","commentClasses","map","commentDetails","key","commentOwnerID","companyRole","commentUserName","commentCompanyName","Date","postCompanyLink","toLowerCase","split","join","commentTime","toLocaleDateString","day","month","year","hour","minute","hour12","replace"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment, useContext } from \"react\";\nimport Axios from \"axios\";\nimport { Container, Col, Form, Row } from \"react-bootstrap\";\n\nimport Profile from \"../Profile\";\n\nimport useInput from \"../../Helpers/use-input\";\nimport { AuthContext } from \"../../Helpers/AuthContext\";\n\nimport { BsClockFill } from \"react-icons/bs\";\nimport { BiMessageCheck, BiMinusCircle } from \"react-icons/bi\";\nimport { toast } from \"react-toastify\";\n\nconst isNotEmpty = (value) => value.trim() !== \"\";\n\nfunction Comment(props) {\n  const { authState, setAuthState } = useContext(AuthContext);\n\n  const userID = props.userID;\n  const postID = props.postID;\n  const [viewProfile, setViewProfile] = useState(\"avatar/male.svg\");\n  const [viewComment, setViewComment] = useState([]);\n\n  useEffect(() => {\n    Axios.get(\n      `${process.env.REACT_APP_SERVER_DOMAIN}/home/userProfile/` + userID,\n      {\n        headers: {\n          accessToken: localStorage.getItem(\"accessToken\"),\n        },\n      }\n    ).then((response) => {\n      const profileDetail1 = response.data[0];\n      const profileDetail2 = response.data[1];\n\n      var profile;\n\n      if (profileDetail1.length === 0) {\n        if (authState.company === 1) {\n          profile = `${process.env.REACT_APP_SERVER_DOMAIN}/public/Assests/Images/avatar/bp.png`;\n          setViewProfile(profile);\n        } else {\n          if (profileDetail2[0].gender === \"Male\") {\n            profile = `${process.env.REACT_APP_SERVER_DOMAIN}/public/Assests/Images/avatar/male.svg`;\n            setViewProfile(profile);\n          } else {\n            profile = `${process.env.REACT_APP_SERVER_DOMAIN}/public/Assests/Images/avatar/female.svg`;\n            setViewProfile(profile);\n          }\n        }\n      } else {\n        profile =\n          `${process.env.REACT_APP_SERVER_DOMAIN}/public/Assests/Images/user/` +\n          profileDetail1[0].profile_photo;\n        setViewProfile(profile);\n      }\n    });\n  });\n\n  useEffect(() => {\n    Axios.get(\n      `${process.env.REACT_APP_SERVER_DOMAIN}/home/commentlist/` + postID\n    ).then((response) => {\n      setViewComment(response.data);\n    });\n  }, [postID]);\n\n  //COMMENT Input Check\n  const {\n    value: enteredComment,\n    isValid: enteredCommentIsValid,\n    hasError: commentInputHasError,\n    valueChangeHandler: commentChangeHandler,\n    inputBlurHandler: commentBlurHandler,\n    reset: resetCommentInput,\n  } = useInput(isNotEmpty);\n\n  let commentFormIsValid = false;\n\n  if (enteredComment !== \"\") {\n    commentFormIsValid = true;\n  }\n\n  const commentFormSubmissionHandler = (event) => {\n    event.preventDefault();\n\n    if (!enteredCommentIsValid) {\n      return;\n    } else {\n      Axios.post(`${process.env.REACT_APP_SERVER_DOMAIN}/home/comment/`, {\n        userID: userID,\n        postID: postID,\n        enteredComment: enteredComment,\n      }).then((response) => {\n        const newCommentData = response.data[1];\n        if (response.data[0].error) {\n          return toast.error(\n            <Fragment>\n              <BiMinusCircle /> <span>{response.data[0].error}</span>\n            </Fragment>\n          );\n        } else {\n          return [\n            toast.success(\n              <Fragment>\n                <BiMessageCheck /> <span>{response.data[0].success}</span>\n              </Fragment>\n            ),\n            setViewComment([\n              {\n                comment: newCommentData[0].comment,\n                comment_user_id: newCommentData[0].comment_user_id,\n                company: newCommentData[0].company,\n                name: newCommentData[0].name,\n                companyname: newCommentData[0].companyname,\n                comment_time: newCommentData[0].comment_time,\n              },\n              ...viewComment,\n            ]),\n          ];\n        }\n      });\n    }\n    resetCommentInput();\n  };\n\n  const commentClasses = commentInputHasError\n    ? \"form-control form-control-sm is-invalid\"\n    : \"form-control form-control-sm\";\n\n  return (\n    <AuthContext.Provider value={{ authState, setAuthState }}>\n      <Container>\n        <Form onSubmit={commentFormSubmissionHandler}>\n          <Row className=\"align-items-center py-3\">\n            <Col xs={1} sm={1} className=\"p-0 ps-2 ps-xs-1\">\n              <img\n                src={viewProfile}\n                alt=\"Zom-In User\"\n                className=\" col my-auto rounded-circle\"\n                width=\"30\"\n                height=\"30\"\n              />\n            </Col>\n            <Col xs={8} sm={9} className=\"pe-xs-0\">\n              <div className=\"\">\n                <input\n                  type=\"text\"\n                  id=\"comment\"\n                  placeholder=\"Comments\"\n                  autoComplete=\"off\"\n                  className={commentClasses}\n                  onChange={commentChangeHandler}\n                  onBlur={commentBlurHandler}\n                  value={enteredComment}\n                />\n\n                {commentInputHasError && (\n                  <Form.Control.Feedback type=\"invalid\">\n                    Please share your thought on this post.\n                  </Form.Control.Feedback>\n                )}\n              </div>\n            </Col>\n            <Col xs={2} sm={2} className=\"p-0\">\n              <button\n                className=\"btn btn-sm btn-primary\"\n                type=\"submit\"\n                disabled={!commentFormIsValid}\n              >\n                Comment\n              </button>\n            </Col>\n          </Row>\n        </Form>\n        {viewComment.map((commentDetails, key) => {\n          const comment = commentDetails.comment;\n          const commentOwnerID = commentDetails.comment_user_id;\n          const companyRole = commentDetails.company;\n          const commentUserName = commentDetails.name;\n          const commentCompanyName = commentDetails.companyname;\n          const comment_time = new Date(commentDetails.comment_time);\n\n          if (companyRole === 1) {\n            var postCompanyLink =\n              \"/partner/\" +\n              commentCompanyName.toLowerCase().trim().split(/\\s+/).join(\"-\");\n          }\n\n          const commentTime = comment_time\n            .toLocaleDateString(\"en-GB\", {\n              day: \"numeric\",\n              month: \"short\",\n              year: \"numeric\",\n              hour: \"2-digit\",\n              minute: \"2-digit\",\n              hour12: true,\n            })\n            .replace(/ /g, \" \");\n          return (\n            <Row className=\"py-1\">\n              <Col xs={1} sm={1} className=\"p-0 ps-2\">\n                <img\n      src={<Profile userID={commentOwnerID} />}\n      alt=\"Zom-IN User\"\n      width=\"32\"\n      height=\"32\"\n      className=\"rounded-circle\"\n    />\n              </Col>\n\n              <Col xs={11} sm={11}>\n                <div className=\"p-2 border rounded bg-light bg-gradient\">\n                  <p className=\"fw-bold mb-0\">\n                    {companyRole === 1 ? (\n                      <a\n                        href={postCompanyLink}\n                        target=\"_blank\"\n                        rel=\"noreferrer\"\n                        className=\"text-decoration-none text-dark\"\n                      >\n                        {commentCompanyName}\n                      </a>\n                    ) : (\n                      <a\n                        href=\"/home\"\n                        className=\"text-decoration-none text-dark\"\n                      >\n                        {\" \"}\n                        {commentUserName}\n                      </a>\n                    )}\n                  </p>\n                  <p className=\"mb-0\">{comment}</p>\n                </div>\n                <p className=\"text-muted fw-light fs-7\">\n                  <BsClockFill size={12} className=\"me-1\" />\n                  {commentTime}\n                </p>\n              </Col>\n            </Row>\n          );\n        })}\n      </Container>\n    </AuthContext.Provider>\n  );\n}\n\nexport default Comment;\n"]},"metadata":{},"sourceType":"module"}